# Configure Log Sources for Amazon Web Services (AWS)

Alert Logic supports the following log source types for AWS deployments:

* **[AWS CloudTrail logs](#cloudTrailLogs)**—Log messages generated by the AWS CloudTrail service that record AWS API activity in your account
* **[AWS S3 logs](#S3Logs)**—Log records that provide details about a single access request, such as the requester, bucket name, request time, request action, response status, and any error codes

For more information about other log source types, see [Configure Log Sources for All Deployments](log-sources-all-deployments.md) or [Configure Log Sources for Microsoft Azure](log-sources-azure.md).

After you provision and install the Alert Logic agent on your target host, the agent automatically creates an associated log source in the Alert Logic console and configures it with the default collection configuration policy for that log source type. You must create and configure new collection sources with existing collection policies to meet more specific requirements. For more information about Log Management policies, see [Log Management Policies](../../configure/log-management-policies.md).

## Create and maintain AWS CloudTrail log sources

    CloudTrail logs are automatically collected through the deployment role. To confirm that Alert Logic is collecting CloudTrail logs from your environment, click here.    
You must create an AWS CloudTrail log source in the Alert Logic console to collect CloudTrail logs. This AWS CloudTrail is in addition to the one configured for discovery of your AWS assets. To complete this action, you need the following AWS account information:

* SQS queue to which CloudTrail publishes events
* IAM role credentials:
   * To use an existing IAM role, select **Use an existing IAM Role** during AWS CloudTrail collection source creation, and then select the  IAM role to use.
   * To create a new IAM role, first download and open one of the following policy documents, and then create an IAM role (see [Configure  IAM Role for Amazon Web Services (AWS) ](../../prepare/iam-role-creation.md) and use the appropriate policy below for your configuration):
      * Use the default policy, [recommended policy document (.txt)](../../pdf-files/cloudtrail-log-source.txt), for CloudTrail log collection. Keep the document open so you can copy and paste the information during IAM role creation.
      * If you have [AWS Key Management Service (KMS)](https://aws.amazon.com/kms/features/) configured for the AWS account in which you are configuring this CloudTrail collection source, use [this policy document](../../pdf-files/cloudtrail-log-source-kms.txt). Keep the document open so you can copy and paste the information during IAM role creation.
      If you decide to configure AWS KMS in the future, you must update the IAM role you created here to use the correct policy for AWS KMS.     

To create an AWS CloudTrail source:

1. From the Deployments page, click the  deployment for which you want to create a CloudTrail collection source.
2. Click  **CONFIGURE LOG SOURCES**.
3. Click the **add** icon (![](../../Resources/Images/Icons/cdAddPlus.png)).
4. From **Source Log Type**, select **AWS CloudTrail**.
5. In **Source Name**, type a descriptive name.
6. Select **Enable Collection**.
7. In **Collection Alerts**, click the field and select one or more alert options.
8. In the **SQS Queue Name** field, type the name of the SQS queue you created to collect CloudTrail logs.
9. From **AWS Region**, specify the region in which you created the SQS queue in the previous steps.
10. Select either **Create new IAM Role** or **Use an existing IAM Role**.
11. In the slideout panel, complete the following fields.
   * In **Credential Name**, enter a descriptive name.
   * In **Role ID**, enter the IAM role you created.
   * In **External ID**, enter your Alert Logic customer ID.
13. In the **Tags** field, type an easily filtered tag.
14. Click **SAVE**.

**To update an **** AWS CloudTrail source:**

1. From the Deployments page, click the  deployment for which you want to update the log source.
2. Click **CONFIGURE LOG SOURCES**.
3. Place your cursor over the desired collection source  and click the pencil icon (![](../../Resources/Images/pencil icon.png)).
4. Make the necessary updates.
5. Click **SAVE**.

## Create and maintain AWS S3 log sources

You must create an AWS S3 log source in the Alert Logic console to collect AWS S3 logs. To complete this action, you need the following AWS account information:

* SQS queue to which CloudTrail publishes events
* IAM role credentials:
   * To use an existing IAM role, select **Use an existing IAM Role** during AWS S3 log source creation, and then select the  IAM role to use.
   * To create a new IAM role, first download and open one of the following policy documents, and then create an IAM role (see [Configure  IAM Role for Amazon Web Services (AWS) ](../../prepare/iam-role-creation.md) and use the appropriate policy below for your configuration):
      * Use the default policy, [recommended policy document (.txt)](../../pdf-files/iam_S3_policy.txt), for S3 log collection. Keep the document open so you can copy and paste the information during IAM role creation.
      * If you have [AWS Key Management Service (KMS)](https://aws.amazon.com/kms/features/) configured for the AWS account in which you are configuring this S3 collection source, use [this policy document](../../pdf-files/iam_S3_policy_kms.txt). Keep the document open so you can copy and paste the information during IAM role creation.
      If you decide to configure AWS KMS in the future, you must update the IAM role you created here to use the correct policy for AWS KMS.     

**To create an AWS S3 source:**

1. From the Deployments page, click the  deployment for which you want to create an S3 collection source.
2. Click **CONFIGURE LOG SOURCES**.
3. Click the **add** icon (![](../../Resources/Images/Icons/cdAddPlus.png)).
4. From **Source Log Type**, select **S3**.
5. In **Source Name**, type a descriptive name.
6. Select **Enable Collection**.
7. In **Bucket**, type the bucket name, followed by the directory name. This bucket name must use a DNS-compliant name. For more information, visit the [AWS documentation site](http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html).

`s3bucketname/root_folder`9. In **File Name or Pattern**, type the file name or date pattern of the file log.
10. In **Collection Policy**:
   * To use an existing policy, select **Use an existing Policy**, and then select a policy.
   * To create a new policy, select **Create a New Policy** and select the settings you want. For more information, see .
12. In **Collection Alerts**, click the field and select one or more alert options.
13. From **Time Zone**, select a time zone.
14. In the Alert Logic console, complete the following fields:
   * In **Credential Name**, enter a descriptive name.
   * In **Role ID**, enter the **Role ARN** you created.
   * In **External ID**, enter the external ID.
16. In **Collection Interval**, type a value in minutes to indicate how often Log Manager retrieves S3 logs.
17. In the **Tags** field, type an easily filtered tag.
18. Click **SAVE**.

**To update an AWS S3 source:**

1. From the Deployments page, click the  deployment for which you want to update the log source.
2. Click **CONFIGURE LOG SOURCES**.
3. Place your cursor over the desired collection source  and click the pencil icon (![](../../Resources/Images/pencil icon.png)).
4. Make the necessary updates.
5. Click **SAVE**.

## Additional Tasks

To learn how to perform additional tasks, such as viewing source information, mass editing sources, and archiving and restoring collection sources, see [View log source information](../log-sources.md#viewCollectionSourceInformation).
